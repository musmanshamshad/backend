{"version":3,"file":"sql-log-prettifier.cjs.production.min.js","sources":["../src/keywords.ts","../src/index.ts"],"sourcesContent":["const operators = [\n  'AND',\n  'BETWEEN',\n  'IN',\n  'LIKE',\n  'NOT',\n  'OR',\n  'IS',\n  'DIV',\n  'REGEXP',\n  'RLIKE',\n  'SOUNDS LIKE',\n  'XOR',\n];\n\nconst functions = [\n  'ASCII',\n  'CHAR_LENGTH',\n  'CHARACTER_LENGTH',\n  'CONCAT',\n  'CONCAT_WS',\n  'FIELD',\n  'FIND_IN_SET',\n  'FORMAT',\n  'INSERT',\n  'INSTR',\n  'LCASE',\n  'LEFT',\n  'LENGTH',\n  'LOCATE',\n  'LOWER',\n  'LPAD',\n  'LTRIM',\n  'MID',\n  'POSITION',\n  'REPEAT',\n  'REPLACE',\n  'REVERSE',\n  'RIGHT',\n  'RPAD',\n  'RTRIM',\n  'SPACE',\n  'STRCMP',\n  'SUBSTR',\n  'SUBSTRING',\n  'SUBSTRING_INDEX',\n  'TRIM',\n  'UCASE',\n  'UPPER',\n  'ABS',\n  'ACOS',\n  'ASIN',\n  'ATAN',\n  'ATAN2',\n  'AVG',\n  'CEIL',\n  'CEILING',\n  'COS',\n  'COT',\n  'COUNT',\n  'DEGREES',\n  'DIV',\n  'EXP',\n  'FLOOR',\n  'GREATEST',\n  'LEAST',\n  'LN',\n  'LOG',\n  'LOG10',\n  'LOG2',\n  'MAX',\n  'MIN',\n  'MOD',\n  'PI',\n  'POW',\n  'POWER',\n  'RADIANS',\n  'RAND',\n  'ROUND',\n  'SIGN',\n  'SIN',\n  'SQRT',\n  'SUM',\n  'TAN',\n  'TRUNCATE',\n  'ADDDATE',\n  'ADDTIME',\n  'CURDATE',\n  'CURRENT_DATE',\n  'CURRENT_TIME',\n  'CURRENT_TIMESTAMP',\n  'CURTIME',\n  'DATE',\n  'DATEDIFF',\n  'DATE_ADD',\n  'DATE_FORMAT',\n  'DATE_SUB',\n  'DAY',\n  'DAYNAME',\n  'DAYOFMONTH',\n  'DAYOFWEEK',\n  'DAYOFYEAR',\n  'EXTRACT',\n  'FROM_DAYS',\n  'HOUR',\n  'LAST_DAY',\n  'LOCALTIME',\n  'LOCALTIMESTAMP',\n  'MAKEDATE',\n  'MAKETIME',\n  'MICROSECOND',\n  'MINUTE',\n  'MONTH',\n  'MONTHNAME',\n  'NOW',\n  'PERIOD_ADD',\n  'PERIOD_DIFF',\n  'QUARTER',\n  'SECOND',\n  'SEC_TO_TIME',\n  'STR_TO_DATE',\n  'SUBDATE',\n  'SUBTIME',\n  'SYSDATE',\n  'TIME',\n  'TIME_FORMAT',\n  'TIME_TO_SEC',\n  'TIMEDIFF',\n  'TIMESTAMP',\n  'TO_DAYS',\n  'WEEK',\n  'WEEKDAY',\n  'WEEKOFYEAR',\n  'YEAR',\n  'YEARWEEK',\n  'BIN',\n  'BINARY',\n  'CASE',\n  'CAST',\n  'COALESCE',\n  'CONNECTION_ID',\n  'CONV',\n  'CONVERT',\n  'CURRENT_USER',\n  'DATABASE',\n  'IF',\n  'IFNULL',\n  'ISNULL',\n  'LAST_INSERT_ID',\n  'NULLIF',\n  'SESSION_USER',\n  'SYSTEM_USER',\n  'USER',\n  'VERSION',\n];\n\nconst keywords = [\n  'ACCESSIBLE',\n  'ACTION',\n  'ADD CONSTRAINT',\n  'ADD',\n  'AGAINST',\n  'AGGREGATE',\n  'ALGORITHM',\n  'ALL',\n  'ALTER COLUMN',\n  'ALTER TABLE',\n  'ALTER',\n  'ANALYSE',\n  'ANALYZE',\n  'AND',\n  'ANY',\n  'AS',\n  'ASC',\n  'AUTO_INCREMENT',\n  'AUTOCOMMIT',\n  'BACKUP DATABASE',\n  'BACKUP',\n  'BEGIN',\n  'BETWEEN',\n  'BINLOG',\n  'BOTH',\n  'CASCADE',\n  'CASE',\n  'CHANGE',\n  'CHANGED',\n  'CHARACTER SET',\n  'CHARSET',\n  'CHECK',\n  'CHECKSUM',\n  'COLLATE',\n  'COLLATION',\n  'COLUMN',\n  'COLUMNS',\n  'COMMENT',\n  'COMMIT',\n  'COMMITTED',\n  'COMPRESSED',\n  'CONCURRENT',\n  'CONSTRAINT',\n  'CONTAINS',\n  'CREATE DATABASE',\n  'CREATE INDEX',\n  'CREATE OR REPLACE VIEW',\n  'CREATE PROCEDURE',\n  'CREATE TABLE',\n  'CREATE UNIQUE INDEX',\n  'CREATE VIEW',\n  'CREATE',\n  'CROSS',\n  'DATABASE',\n  'DATABASES',\n  'DAY_HOUR',\n  'DAY_MINUTE',\n  'DAY_SECOND',\n  'DEFAULT',\n  'DEFINER',\n  'DELAYED',\n  'DELETE',\n  'DESC',\n  'DESCRIBE',\n  'DETERMINISTIC',\n  'DISTINCT',\n  'DISTINCTROW',\n  'DO',\n  'DROP COLUMN',\n  'DROP CONSTRAINT',\n  'DROP DATABASE',\n  'DROP DEFAULT',\n  'DROP INDEX',\n  'DROP TABLE',\n  'DROP VIEW',\n  'DROP',\n  'DUMPFILE',\n  'DUPLICATE',\n  'DYNAMIC',\n  'ELSE',\n  'ENCLOSED',\n  'END',\n  'ENGINE_TYPE',\n  'ENGINE',\n  'ENGINES',\n  'ESCAPE',\n  'ESCAPED',\n  'EVENTS',\n  'EXEC',\n  'EXECUTE',\n  'EXISTS',\n  'EXPLAIN',\n  'EXTENDED',\n  'FAST',\n  'FETCH',\n  'FIELDS',\n  'FILE',\n  'FIRST',\n  'FIXED',\n  'FLUSH',\n  'FOR',\n  'FORCE',\n  'FOREIGN KEY',\n  'FOREIGN',\n  'FROM',\n  'FULL OUTER JOIN',\n  'FULL',\n  'FULLTEXT',\n  'FUNCTION',\n  'GLOBAL',\n  'GRANT',\n  'GRANTS',\n  'GROUP BY',\n  'GROUP_CONCAT',\n  'HAVING',\n  'HEAP',\n  'HIGH_PRIORITY',\n  'HOSTS',\n  'HOUR_MINUTE',\n  'HOUR_SECOND',\n  'IDENTIFIED',\n  'IGNORE',\n  'IN',\n  'INDEX',\n  'INDEXES',\n  'INFILE',\n  'INNER JOIN',\n  'INSERT INTO SELECT',\n  'INSERT INTO',\n  'INSERT_ID',\n  'INSERT_METHOD',\n  'INTERVAL',\n  'INTO',\n  'INVOKER',\n  'IS NOT NULL',\n  'IS NULL',\n  'ISOLATION',\n  'JOIN',\n  'KEY',\n  'KEYS',\n  'KILL',\n  'LEADING',\n  'LEFT JOIN',\n  'LEVEL',\n  'LIKE',\n  'LIMIT',\n  'LINEAR',\n  'LINES',\n  'LOAD',\n  'LOCAL',\n  'LOCK',\n  'LOCKS',\n  'LOGS',\n  'LOW_PRIORITY',\n  'MARIA',\n  'MASTER_CONNECT_RETRY',\n  'MASTER_HOST',\n  'MASTER_LOG_FILE',\n  'MASTER',\n  'MATCH',\n  'MAX_CONNECTIONS_PER_HOUR',\n  'MAX_QUERIES_PER_HOUR',\n  'MAX_ROWS',\n  'MAX_UPDATES_PER_HOUR',\n  'MAX_USER_CONNECTIONS',\n  'MEDIUM',\n  'MERGE',\n  'MIN_ROWS',\n  'MINUTE_SECOND',\n  'MODE',\n  'MODIFY',\n  'MRG_MYISAM',\n  'MYISAM',\n  'NAMES',\n  'NATURAL',\n  'NOT NULL',\n  'NOT',\n  'NOW()',\n  'NULL',\n  'OFFSET',\n  'ON DELETE',\n  'ON UPDATE',\n  'ON',\n  'ONLY',\n  'OPEN',\n  'OPTIMIZE',\n  'OPTION',\n  'OPTIONALLY',\n  'OR',\n  'ORDER BY',\n  'OUTER JOIN',\n  'OUTFILE',\n  'PACK_KEYS',\n  'PAGE',\n  'PARTIAL',\n  'PARTITION',\n  'PARTITIONS',\n  'PASSWORD',\n  'PRIMARY KEY',\n  'PRIMARY',\n  'PRIVILEGES',\n  'PROCEDURE',\n  'PROCESS',\n  'PROCESSLIST',\n  'PURGE',\n  'QUICK',\n  'RAID_CHUNKS',\n  'RAID_CHUNKSIZE',\n  'RAID_TYPE',\n  'RAID0',\n  'RANGE',\n  'READ_ONLY',\n  'READ_WRITE',\n  'READ',\n  'REFERENCES',\n  'RELOAD',\n  'RENAME',\n  'REPAIR',\n  'REPEATABLE',\n  'REPLICATION',\n  'RESET',\n  'RESTORE',\n  'RESTRICT',\n  'RETURN',\n  'RETURNS',\n  'REVOKE',\n  'RIGHT JOIN',\n  'ROLLBACK',\n  'ROW_FORMAT',\n  'ROW',\n  'ROWNUM',\n  'ROWS',\n  'SECURITY',\n  'SELECT DISTINCT',\n  'SELECT INTO',\n  'SELECT TOP',\n  'SELECT',\n  'SEPARATOR',\n  'SERIALIZABLE',\n  'SESSION',\n  'SET',\n  'SHARE',\n  'SHOW',\n  'SHUTDOWN',\n  'SLAVE',\n  'SONAME',\n  'SOUNDS',\n  'SQL_AUTO_IS_NULL',\n  'SQL_BIG_RESULT',\n  'SQL_BIG_SELECTS',\n  'SQL_BIG_TABLES',\n  'SQL_BUFFER_RESULT',\n  'SQL_CACHE',\n  'SQL_CALC_FOUND_ROWS',\n  'SQL_LOG_BIN',\n  'SQL_LOG_OFF',\n  'SQL_LOG_UPDATE',\n  'SQL_LOW_PRIORITY_UPDATES',\n  'SQL_MAX_JOIN_SIZE',\n  'SQL_NO_CACHE',\n  'SQL_QUOTE_SHOW_CREATE',\n  'SQL_SAFE_UPDATES',\n  'SQL_SELECT_LIMIT',\n  'SQL_SLAVE_SKIP_COUNTER',\n  'SQL_SMALL_RESULT',\n  'SQL_WARNINGS',\n  'SQL',\n  'START',\n  'STARTING',\n  'STATUS',\n  'STOP',\n  'STORAGE',\n  'STRAIGHT_JOIN',\n  'STRING',\n  'STRIPED',\n  'SUPER',\n  'TABLE',\n  'TABLES',\n  'TEMPORARY',\n  'TERMINATED',\n  'THEN',\n  'TO',\n  'TOP',\n  'TRAILING',\n  'TRANSACTIONAL',\n  'TRUE',\n  'TRUNCATE TABLE',\n  'TYPE',\n  'TYPES',\n  'UNCOMMITTED',\n  'UNION ALL',\n  'UNION',\n  'UNIQUE',\n  'UNLOCK',\n  'UNSIGNED',\n  'UPDATE',\n  'USAGE',\n  'USE',\n  'USING',\n  'VALUES',\n  'VARIABLES',\n  'VIEW',\n  'WHEN',\n  'WHERE',\n  'WITH',\n  'WORK',\n  'WRITE',\n  'YEAR_MONTH',\n];\n\nexport default {\n  functions,\n  keywords,\n  operators,\n};\n","import chalk from 'chalk';\nimport sqlFormatter from 'sql-formatter';\nimport keywords from './keywords';\nimport { Options, OutputSettings, Settings } from 'types';\n\nconst defaultOptions: Options = {\n  format: true,\n  noColors: false,\n  settings: {\n    functions: {\n      color: '#ff5555',\n      modifiers: ['bold'],\n    },\n    keywords: {\n      color: '#ff5555',\n      modifiers: ['bold'],\n    },\n    operators: {\n      color: '#91B859',\n      modifiers: ['bold'],\n    },\n    strings: {\n      color: '#FFFFF',\n    },\n    numbers: {\n      color: '#50fa7b',\n    },\n  },\n};\n\nconst substitute = (\n  word: string,\n  { color = '#FFFFFF', modifiers = [] }: OutputSettings\n) => {\n  const ctx = new chalk.Instance({ level: 3 });\n  // @ts-ignore\n  ctx.customColor = ctx.hex(color);\n  const chalkModifiers = ['customColor', ...modifiers].join('.');\n  return ctx`{${chalkModifiers} ${word}}`;\n};\n\nconst colorKeywords = (query: string, words: Object, settings: Settings) => {\n  const pattern = (word: string) => new RegExp(`\\\\b${word}\\\\b`, 'gmi');\n\n  Object.keys(words).forEach((key: string) => {\n    words[key].forEach((word: string) => {\n      query = query.replace(pattern(word), substitute(word, settings[key]));\n    });\n  });\n\n  return query;\n};\n\nconst colorValues = (query: string, settings: Settings) => {\n  const regexes = {\n    strings: /('\\w+')/gim,\n    numbers: /(\\s\\b\\d+\\b)/gim,\n  };\n\n  Object.keys(regexes).forEach((reg: string) => {\n    query = query.replace(regexes[reg], substitute('$1', settings[reg]));\n  });\n\n  return query;\n};\n\nexport const prettify = (query: string, options: Options = {}) => {\n  const { format, noColors } = { ...defaultOptions, ...options };\n  const settings = { ...defaultOptions.settings, ...options.settings };\n  if (format) query = sqlFormatter.format(query);\n  if (noColors) return query;\n  query = colorKeywords(query, keywords, settings);\n  query = colorValues(query, settings);\n  return query;\n};\n"],"names":["functions","keywords","operators","defaultOptions","format","noColors","settings","color","modifiers","strings","numbers","substitute","word","ctx","chalk","Instance","level","customColor","hex","chalkModifiers","join","query","options","sqlFormatter","regexes","Object","keys","forEach","reg","replace","colorValues","words","key","RegExp","pattern","colorKeywords"],"mappings":"iZAAA,MAmde,CACbA,UArcgB,CAChB,QACA,cACA,mBACA,SACA,YACA,QACA,cACA,SACA,SACA,QACA,QACA,OACA,SACA,SACA,QACA,OACA,QACA,MACA,WACA,SACA,UACA,UACA,QACA,OACA,QACA,QACA,SACA,SACA,YACA,kBACA,OACA,QACA,QACA,MACA,OACA,OACA,OACA,QACA,MACA,OACA,UACA,MACA,MACA,QACA,UACA,MACA,MACA,QACA,WACA,QACA,KACA,MACA,QACA,OACA,MACA,MACA,MACA,KACA,MACA,QACA,UACA,OACA,QACA,OACA,MACA,OACA,MACA,MACA,WACA,UACA,UACA,UACA,eACA,eACA,oBACA,UACA,OACA,WACA,WACA,cACA,WACA,MACA,UACA,aACA,YACA,YACA,UACA,YACA,OACA,WACA,YACA,iBACA,WACA,WACA,cACA,SACA,QACA,YACA,MACA,aACA,cACA,UACA,SACA,cACA,cACA,UACA,UACA,UACA,OACA,cACA,cACA,WACA,YACA,UACA,OACA,UACA,aACA,OACA,WACA,MACA,SACA,OACA,OACA,WACA,gBACA,OACA,UACA,eACA,WACA,KACA,SACA,SACA,iBACA,SACA,eACA,cACA,OACA,WA4TAC,SAzTe,CACf,aACA,SACA,iBACA,MACA,UACA,YACA,YACA,MACA,eACA,cACA,QACA,UACA,UACA,MACA,MACA,KACA,MACA,iBACA,aACA,kBACA,SACA,QACA,UACA,SACA,OACA,UACA,OACA,SACA,UACA,gBACA,UACA,QACA,WACA,UACA,YACA,SACA,UACA,UACA,SACA,YACA,aACA,aACA,aACA,WACA,kBACA,eACA,yBACA,mBACA,eACA,sBACA,cACA,SACA,QACA,WACA,YACA,WACA,aACA,aACA,UACA,UACA,UACA,SACA,OACA,WACA,gBACA,WACA,cACA,KACA,cACA,kBACA,gBACA,eACA,aACA,aACA,YACA,OACA,WACA,YACA,UACA,OACA,WACA,MACA,cACA,SACA,UACA,SACA,UACA,SACA,OACA,UACA,SACA,UACA,WACA,OACA,QACA,SACA,OACA,QACA,QACA,QACA,MACA,QACA,cACA,UACA,OACA,kBACA,OACA,WACA,WACA,SACA,QACA,SACA,WACA,eACA,SACA,OACA,gBACA,QACA,cACA,cACA,aACA,SACA,KACA,QACA,UACA,SACA,aACA,qBACA,cACA,YACA,gBACA,WACA,OACA,UACA,cACA,UACA,YACA,OACA,MACA,OACA,OACA,UACA,YACA,QACA,OACA,QACA,SACA,QACA,OACA,QACA,OACA,QACA,OACA,eACA,QACA,uBACA,cACA,kBACA,SACA,QACA,2BACA,uBACA,WACA,uBACA,uBACA,SACA,QACA,WACA,gBACA,OACA,SACA,aACA,SACA,QACA,UACA,WACA,MACA,QACA,OACA,SACA,YACA,YACA,KACA,OACA,OACA,WACA,SACA,aACA,KACA,WACA,aACA,UACA,YACA,OACA,UACA,YACA,aACA,WACA,cACA,UACA,aACA,YACA,UACA,cACA,QACA,QACA,cACA,iBACA,YACA,QACA,QACA,YACA,aACA,OACA,aACA,SACA,SACA,SACA,aACA,cACA,QACA,UACA,WACA,SACA,UACA,SACA,aACA,WACA,aACA,MACA,SACA,OACA,WACA,kBACA,cACA,aACA,SACA,YACA,eACA,UACA,MACA,QACA,OACA,WACA,QACA,SACA,SACA,mBACA,iBACA,kBACA,iBACA,oBACA,YACA,sBACA,cACA,cACA,iBACA,2BACA,oBACA,eACA,wBACA,mBACA,mBACA,yBACA,mBACA,eACA,MACA,QACA,WACA,SACA,OACA,UACA,gBACA,SACA,UACA,QACA,QACA,SACA,YACA,aACA,OACA,KACA,MACA,WACA,gBACA,OACA,iBACA,OACA,QACA,cACA,YACA,QACA,SACA,SACA,WACA,SACA,QACA,MACA,QACA,SACA,YACA,OACA,OACA,QACA,OACA,OACA,QACA,cAMAC,UAtdgB,CAChB,MACA,UACA,KACA,OACA,MACA,KACA,KACA,MACA,SACA,QACA,cACA,iHCPIC,EAA0B,CAC9BC,QAAQ,EACRC,UAAU,EACVC,SAAU,CACRN,UAAW,CACTO,MAAO,UACPC,UAAW,CAAC,SAEdP,SAAU,CACRM,MAAO,UACPC,UAAW,CAAC,SAEdN,UAAW,CACTK,MAAO,UACPC,UAAW,CAAC,SAEdC,QAAS,CACPF,MAAO,UAETG,QAAS,CACPH,MAAO,aAKPI,EAAa,SACjBC,aACEL,MAAAA,aAAQ,gBAAWC,UAAAA,aAAY,KAE3BK,EAAM,IAAIC,EAAMC,SAAS,CAAEC,MAAO,IAExCH,EAAII,YAAcJ,EAAIK,IAAIX,OACpBY,EAAiB,CAAC,sBAAkBX,GAAWY,KAAK,YACnDP,MAAOM,EAAkBP,qBA4BV,SAACS,EAAeC,YAAAA,IAAAA,EAAmB,eACvBnB,KAAmBmB,GAA7ClB,IAAAA,OAAQC,IAAAA,SACVC,OAAgBH,EAAeG,YAAagB,EAAQhB,iBACtDF,IAAQiB,EAAQE,EAAanB,OAAOiB,IACpChB,EAAiBgB,EAErBA,EAnBkB,SAACA,EAAef,OAC5BkB,EAAU,CACdf,QAAS,aACTC,QAAS,yBAGXe,OAAOC,KAAKF,GAASG,SAAQ,SAACC,GAC5BP,EAAQA,EAAMQ,QAAQL,EAAQI,GAAMjB,EAAW,KAAML,EAASsB,QAGzDP,EASCS,CADRT,EA9BoB,SAACA,EAAeU,EAAezB,UAGnDmB,OAAOC,KAAKK,GAAOJ,SAAQ,SAACK,GAC1BD,EAAMC,GAAKL,SAAQ,SAACf,GAClBS,EAAQA,EAAMQ,QAJF,SAACjB,UAAiB,IAAIqB,aAAarB,QAAW,OAIpCsB,CAAQtB,GAAOD,EAAWC,EAAMN,EAAS0B,WAI5DX,EAqBCc,CAAcd,EAAOpB,EAAUK,GACZA"}